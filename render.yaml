# ğŸš€ Render.com Configuration - KEREN-Z
# Backend API Service (Express + Supabase)

services:
  # ğŸ“¦ Backend API Service
  - type: web
    name: keren-z-api
    env: node
    region: frankfurt
    plan: free

    # ğŸ”§ Build & Start
    buildCommand: cd server && npm install
    startCommand: cd server && node index.js

    # ğŸŒ Environment Variables
    envVars:
      # Node Configuration
      - key: NODE_VERSION
        value: 20
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 10000

      # ğŸ—„ï¸ Database (Supabase)
      - key: SUPABASE_URL
        sync: false  # Ã€ configurer manuellement
      - key: SUPABASE_SERVICE_KEY
        sync: false  # ClÃ© privÃ©e backend

      # ğŸ’³ Stripe Payment
      - key: STRIPE_SECRET_KEY
        sync: false
      - key: STRIPE_WEBHOOK_SECRET
        sync: false

      # ğŸ“§ Email Service
      - key: EMAIL_SERVICE_API_KEY
        sync: false

      # ğŸŒ Frontend URL (CORS)
      - key: FRONTEND_URL
        value: https://keren-z.netlify.app  # Ã€ ajuster avec votre URL Netlify

    # â¤ï¸ Health Check
    healthCheckPath: /api/health

    # ğŸ”„ Auto-Deploy
    autoDeploy: true

# ğŸ“š Documentation
#
# Pour dÃ©ployer:
# 1. Connecter le repo GitHub Ã  Render: https://github.com/CodeNoLimits/KEREN-Z
# 2. Render dÃ©tectera automatiquement ce fichier render.yaml
# 3. Configurer les variables d'environnement dans le Dashboard
#
# Supabase:
# - CrÃ©er projet sur https://supabase.com
# - Copier URL et Service Key
#
# Stripe:
# - Dashboard: https://dashboard.stripe.com
# - Copier Secret Key (sk_live_xxx)
# - Configurer webhook â†’ URL Render/api/webhooks/stripe
#
# Frontend:
# - DÃ©ployÃ© sur Netlify
# - Mettre Ã  jour FRONTEND_URL avec l'URL Netlify rÃ©elle
